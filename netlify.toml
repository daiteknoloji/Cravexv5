# Netlify Configuration for Element-web deployment
# This file is at the root level to control submodule behavior

[build]
  # IMPORTANT: Base directory must be set in Netlify dashboard UI
  # Setting it here doesn't work properly - set in dashboard instead!
  
  # Build command - will run from base directory set in dashboard
  command = "cd www/element-web && yarn install && yarn build"
  
  # Output directory relative to repo root
  publish = "www/element-web/webapp"

[build.environment]
  # Node version - Element-web requires Node 20+
  NODE_VERSION = "20"
  
  # Disable git submodules
  GIT_LFS_ENABLED = "false"

# Redirect rules for SPA
[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

