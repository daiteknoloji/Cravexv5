# Railway Matrix Synapse Dockerfile
FROM matrixdotorg/synapse:latest

# Config dosyasını kopyala
COPY synapse-railway-config/homeserver.yaml /config/homeserver.yaml

# Başlangıç scripti
COPY synapse-railway-config/start.sh /start.sh
RUN chmod +x /start.sh && \
    sed -i 's/\r$//' /start.sh

EXPOSE 8008

# Railway için direkt Python komutunu kullan
# start.sh içeriği Dockerfile'da çalışacak, sonra Python başlatılacak
ENTRYPOINT ["/start.sh"]

